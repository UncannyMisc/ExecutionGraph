<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1015px" preserveAspectRatio="none" style="width:1905px;height:1015px;" version="1.1" viewBox="0 0 1905 1015" width="1905px" zoomAndPan="magnify"><defs><filter height="300%" id="f1q420e7a73i2m" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#D3D3D3" height="1000.3047" style="stroke: #A80036; stroke-width: 1.0;" width="624" x="341.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="596.5" y="16.0669">CEF [IO-Thread]</text><rect fill="#D3D3D3" height="1000.3047" style="stroke: #A80036; stroke-width: 1.0;" width="786" x="1108.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="212" x="1395.5" y="16.0669">backend [Dispatcher-Thread]</text><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="795.5859" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="363" y="136.125"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="573" y="165.2578"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="848" y="194.3906"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="206.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="848" y="281.7891"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="62.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="848" y="748.9141"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="62.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="848" y="840.3125"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1222" y="445.5859"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="260.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1222" y="488.7188"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="138.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1563" y="532.9844"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1781.5" y="595.25"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="43" x2="43" y1="74.7266" y2="949.7109"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="367.5" x2="367.5" y1="74.7266" y2="949.7109"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="577.5" x2="577.5" y1="74.7266" y2="949.7109"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="852.5" x2="852.5" y1="74.7266" y2="949.7109"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1226.5" x2="1226.5" y1="74.7266" y2="949.7109"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1567.5" x2="1567.5" y1="74.7266" y2="949.7109"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1786.5" x2="1786.5" y1="74.7266" y2="949.7109"/><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="8" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="15" y="59.4248">client js</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="66" x="8" y="948.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="15" y="968.7061">client js</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="41" x="345.5" y="39.4297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="352.5" y="59.4248">CEF</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="41" x="345.5" y="948.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="352.5" y="968.7061">CEF</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="255" x="448.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="241" x="455.5" y="44.1328">«BackendSchemeHandlerFactory»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="163" x="494.5" y="60.4297">backendHandlerFactory</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="255" x="448.5" y="948.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="241" x="455.5" y="969.7109">«BackendSchemeHandlerFactory»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="163" x="494.5" y="986.0078">backendHandlerFactory</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="213" x="744.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="199" x="751.5" y="44.1328">«BackendResourceHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="180" x="761" y="60.4297">backendResourceHandler</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="213" x="744.5" y="948.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="199" x="751.5" y="969.7109">«BackendResourceHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="180" x="761" y="986.0078">backendResourceHandler</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="225" x="1112.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="1119.5" y="44.1328">«BackendRequestDispatcher»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="129" x="1160.5" y="60.4297">requestDispatcher</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="225" x="1112.5" y="948.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="211" x="1119.5" y="969.7109">«BackendRequestDispatcher»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="129" x="1160.5" y="986.0078">requestDispatcher</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="205" x="1463.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="191" x="1470.5" y="44.1328">«BackendRequestHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="1512.5" y="60.4297">requestHandler</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="205" x="1463.5" y="948.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="191" x="1470.5" y="969.7109">«BackendRequestHandler»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="107" x="1512.5" y="986.0078">requestHandler</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="204" x="1682.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="190" x="1689.5" y="44.1328">«ExecutionGraphBackend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="1754.5" y="60.4297">backend</text><rect fill="#FEFECE" filter="url(#f1q420e7a73i2m)" height="46.5938" style="stroke: #A80036; stroke-width: 1.5;" width="204" x="1682.5" y="948.7109"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="190" x="1689.5" y="969.7109">«ExecutionGraphBackend»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="60" x="1754.5" y="986.0078">backend</text><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="795.5859" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="363" y="136.125"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="87.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="573" y="165.2578"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="848" y="194.3906"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="206.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="848" y="281.7891"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="62.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="848" y="748.9141"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="62.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="848" y="840.3125"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1222" y="445.5859"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="260.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1222" y="488.7188"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="138.5313" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1563" y="532.9844"/><rect fill="#FFFFFF" filter="url(#f1q420e7a73i2m)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="1781.5" y="595.25"/><polygon fill="#A80036" points="351,132.125,361,136.125,351,140.125,355,136.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="43" x2="357" y1="136.125" y2="136.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="50" y="100.7935">REST Request:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="301" x="50" y="115.9263">http://executiongraph-backend/&lt;requestType&gt;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="191" x="50" y="131.0591">[request type e.g. "addNode"]</text><polygon fill="#A80036" points="561,161.2578,571,165.2578,561,169.2578,565,165.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="373" x2="567" y1="165.2578" y2="165.2578"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="380" y="160.1919">Create(...)</text><polygon fill="#A80036" points="836,190.3906,846,194.3906,836,198.3906,840,194.3906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="583" x2="842" y1="194.3906" y2="194.3906"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="590" y="189.3247">create (from pool)</text><polygon fill="#A80036" points="594,219.5234,584,223.5234,594,227.5234,590,223.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="588" x2="852" y1="223.5234" y2="223.5234"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="600" y="218.4575">backendResourceHandler</text><polygon fill="#A80036" points="384,248.6563,374,252.6563,384,256.6563,380,252.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="378" x2="577" y1="252.6563" y2="252.6563"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="390" y="247.5903">backendResourceHandler</text><polygon fill="#A80036" points="836,277.7891,846,281.7891,836,285.7891,840,281.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="373" x2="842" y1="281.7891" y2="281.7891"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="264" x="380" y="276.7231">ProcessRequest(request, callback)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="858" x2="900" y1="310.9219" y2="310.9219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="900" x2="900" y1="310.9219" y2="323.9219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="859" x2="900" y1="323.9219" y2="323.9219"/><polygon fill="#A80036" points="869,319.9219,859,323.9219,869,327.9219,865,323.9219" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="865" y="305.856">initRequest()</text><polygon fill="#A80036" points="384,349.0547,374,353.0547,384,357.0547,380,353.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="378" x2="847" y1="353.0547" y2="353.0547"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="40" x="390" y="347.9888">false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="434" y="347.9888">[error happened]</text><polygon fill="#FBFB77" filter="url(#f1q420e7a73i2m)" points="797,366.0547,908,366.0547,918,385.0547,908,404.0547,797,404.0547,787,385.0547,797,366.0547" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="107" x="799" y="382.1216">handling request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="799" y="397.2544">[or SetError]</text><polygon fill="#A80036" points="1210,441.5859,1220,445.5859,1210,449.5859,1214,445.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="858" x2="1216" y1="445.5859" y2="445.5859"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="328" x="865" y="425.3872">addRequest(requestCef,responsePromiseCef)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="345" x="865" y="440.52">[response contains callback: response headers ready]</text><polygon fill="#A80036" points="869,455.5859,859,459.5859,869,463.5859,865,459.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="863" x2="1226" y1="459.5859" y2="459.5859"/><polygon fill="#A80036" points="384,484.7188,374,488.7188,384,492.7188,380,488.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="378" x2="852" y1="488.7188" y2="488.7188"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="32" x="390" y="483.6528">true</text><polygon fill="#A80036" points="1551,528.9844,1561,532.9844,1551,536.9844,1555,532.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1232" x2="1557" y1="532.9844" y2="532.9844"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="312" x="1239" y="512.7856">handleRequest(request, responsePromise)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="1239" y="527.9185">[optional threaded]</text><polygon fill="#FBFB77" filter="url(#f1q420e7a73i2m)" points="1486,545.9844,1650,545.9844,1660,556.9844,1650,568.9844,1486,568.9844,1476,556.9844,1486,545.9844" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="1488" y="562.0513">deserialize(request)</text><polygon fill="#A80036" points="1769.5,591.25,1779.5,595.25,1769.5,599.25,1773.5,595.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1573" x2="1775.5" y1="595.25" y2="595.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="1580" y="590.1841">do work, e.g.</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="1665" y="590.1841">addNode(...)</text><polygon fill="#A80036" points="1584,620.3828,1574,624.3828,1584,628.3828,1580,624.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1578" x2="1785.5" y1="624.3828" y2="624.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="1590" y="619.3169">completed</text><polygon fill="#FBFB77" filter="url(#f1q420e7a73i2m)" points="1490,637.3828,1646,637.3828,1656,648.3828,1646,660.3828,1490,660.3828,1480,648.3828,1490,637.3828" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="1492" y="653.4497">serialize(response)</text><polygon fill="#A80036" points="1243,667.5156,1233,671.5156,1243,675.5156,1239,671.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1237" x2="1567" y1="671.5156" y2="671.5156"/><polygon fill="#FBFB77" filter="url(#f1q420e7a73i2m)" points="1099,684.5156,1354,684.5156,1364,703.5156,1354,722.5156,1099,722.5156,1089,703.5156,1099,684.5156" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="1101" y="700.5825">response.ready()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="1101" y="715.7153">[or</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="1123" y="715.7153">cancel("could not add node")</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="1347" y="715.7153">]</text><polygon fill="#A80036" points="836,744.9141,846,748.9141,836,752.9141,840,748.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="373" x2="842" y1="748.9141" y2="748.9141"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="456" x="380" y="743.8481">GetResponseHeaders(response, responseLength, redirectUrl)</text><polygon fill="#FBFB77" filter="url(#f1q420e7a73i2m)" points="732,761.9141,974,761.9141,984,780.9141,974,799.9141,732,799.9141,722,780.9141,732,761.9141" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="734" y="777.981">copy MIME type and response length</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="18" x="734" y="793.1138">[or</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="756" y="793.1138">SetError()</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="836" y="793.1138">]</text><polygon fill="#A80036" points="384,807.1797,374,811.1797,384,815.1797,380,811.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="378" x2="852" y1="811.1797" y2="811.1797"/><polygon fill="#A80036" points="836,836.3125,846,840.3125,836,844.3125,840,840.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="373" x2="842" y1="840.3125" y2="840.3125"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="440" x="380" y="835.2466">ReadResponse(dataOut, bytesToRead, bytesRead, callback)</text><polygon fill="#FBFB77" filter="url(#f1q420e7a73i2m)" points="783,853.3125,923,853.3125,933,864.3125,923,876.3125,783,876.3125,773,864.3125,783,853.3125" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="785" y="869.3794">copy data to dataOut</text><polygon fill="#A80036" points="384,898.5781,374,902.5781,384,906.5781,380,902.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="378" x2="852" y1="902.5781" y2="902.5781"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="390" y="897.5122">true, bytesRead = 512</text><polygon fill="#A80036" points="54,927.7109,44,931.7109,54,935.7109,50,931.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="48" x2="367" y1="931.7109" y2="931.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="60" y="926.645">REST Response</text><!--
@startuml
participant client as "client js"

box "CEF [IO-Thread]" #LightGrey
participant CEF

participant backendHandlerFactory << BackendSchemeHandlerFactory >>
participant backendResourceHandler << BackendResourceHandler >>
end box

box "backend [Dispatcher-Thread]" #LightGrey
    participant requestDispatcher <<BackendRequestDispatcher>>
	participant requestHandler <<BackendRequestHandler>>
    participant backend <<ExecutionGraphBackend>>
end box

client -> CEF : REST Request:\nhttp://executiongraph-backend/<requestType>\n[request type e.g. "addNode"]
activate CEF

    CEF -> backendHandlerFactory : ""Create(...)"" 
    activate backendHandlerFactory
        backendHandlerFactory -> backendResourceHandler : ""create (from pool)""
        activate backendResourceHandler
        backendHandlerFactory <- - backendResourceHandler : ""backendResourceHandler""
        deactivate backendResourceHandler
        CEF <- - backendHandlerFactory : ""backendResourceHandler""
    deactivate backendHandlerFactory

    CEF -> backendResourceHandler : ""ProcessRequest(request, callback)""
    activate backendResourceHandler
        backendResourceHandler -> backendResourceHandler : initRequest()
        CEF <- - backendResourceHandler : ""false"" [error happened]
        hnote over backendResourceHandler : handling request\n[or SetError]
        backendResourceHandler -> requestDispatcher : ""addRequest(requestCef,responsePromiseCef)""\n[response contains callback: response headers ready]
        activate requestDispatcher
        backendResourceHandler <- - requestDispatcher :
        deactivate requestDispatcher
        CEF <- - backendResourceHandler : ""true""
    deactivate backendResourceHandler

    
    activate requestDispatcher
        requestDispatcher -> requestHandler : ""handleRequest(request, responsePromise)""\n[optional threaded]
        activate requestHandler
            hnote over requestHandler: ""deserialize(request)""
            requestHandler -> backend : do work, e.g. ""addNode(...)""
            activate backend
                requestHandler <- - backend : completed
            deactivate backend
            hnote over requestHandler: ""serialize(response)""
            requestDispatcher <- - requestHandler
        deactivate requestHandler
    hnote over requestDispatcher: ""response.ready()""\n[or ""cancel("could not add node")""]

    CEF -> backendResourceHandler : ""GetResponseHeaders(response, responseLength, redirectUrl)""
    deactivate requestDispatcher 
    activate backendResourceHandler
        hnote over backendResourceHandler: copy MIME type and response length \n[or ""SetError()""]
        CEF <- backendResourceHandler
    deactivate backendResourceHandler

    CEF -> backendResourceHandler : ""ReadResponse(dataOut, bytesToRead, bytesRead, callback)""
    activate backendResourceHandler
        hnote over backendResourceHandler: copy data to dataOut
        CEF <- backendResourceHandler : ""true, bytesRead = 512""
    deactivate backendResourceHandler

    CEF -> client : REST Response
deactivate CEF
@enduml

PlantUML version 1.2018.09(Fri Jul 27 18:58:18 CEST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.1+13-Ubuntu-3ubuntu3.18.10.1
Operating System: Linux
OS Version: 4.18.0-12-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>